<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
// /**
//  * @param {number[]} nums
//  * @param {number} target
//  * @return {number[]}
//  */
// var searchRange = function(nums, target) {
//     const len = nums.length;
//     let left = 0,
//         result = [],
//         right = len - 1,
//         mid;
//     if (!len) {
//         return [-1, -1];
//     }
//    // 寻找左边第一个元素  左闭右开 // 最后结束条件是 left === right
//     while (left < right) {
//         mid = Math.floor((left + right) / 2);
//         console.log(left, mid, right);
//         if (nums[mid] === target) {
//             right = mid;
//         } else if (nums[mid] < target) {
//             left = mid + 1;
//         } else if (nums[mid] > target) {
//             right = mid;
//         }
//     }
//     if (nums[left] === target) {
//         result.push(left);
//     } else {
//         return [-1, -1]
//     }
//     // 寻找右侧
//     left = 0;
//     right = len;
//     while (left < right) {
//         mid = Math.floor((left + right) / 2);
//         console.log(left, mid, right);
//         if (nums[mid] === target) {
//             left = mid + 1;
//         } else if (nums[mid] < target) {
//             left = mid + 1;
//         } else if (nums[mid] > target) {
//             right = mid;
//         }
//     }
//     result.push(right - 1);
//     return result;
// };


//    二刷
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number[]}
 */
  // 思路：二分
  //
var searchRange = function(nums, target) {
    const len = nums.length;
    if (!len) return [-1, -1];
    let left = 0,
      right = len - 1,
      mid;
    const res = [-1, -1];
    //  找第一个
    while (left <= right) {
      mid = Math.floor((left + right) / 2);
      if (nums[mid] > target) {
        right = mid - 1;
      }
      if (nums[mid] < target) {
        left = mid + 1;
      }
      if (nums[mid] === target) {
        // 是第一个
        if (nums[mid - 1] !== target) {
          res[0] = mid;
          break;
        }
        // 不是第一个。
        else {
          right = mid - 1;
        }
      }
    }
    left = 0;
    right = len - 1;
    //  找最后一个
    while (left <= right) {
      mid = Math.floor((left + right) / 2);
      if (nums[mid] > target) {
        right = mid - 1;
      }
      if (nums[mid] < target) {
        left = mid + 1;
      }
      if (nums[mid] === target) {
        // 是最后一个
        if (nums[mid + 1] !== target) {
          res[1] = mid;
          break;
        }
        else {
          left = mid + 1;
        }
      }
    }
    return res;
  };

let arr = [0, 1, 2, 3, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 7, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,];
let arr2 = [5,7,7,8,8,10];
console.log(searchRange(arr, 8));
</script>
</body>
</html>
