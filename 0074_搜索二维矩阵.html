<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /**
     * @param {number[][]} matrix
     * @param {number} target
     * @return {boolean}
     */
    const matrix = [
        [1, 3]
    ];
    // 自己写的  遍历两次二分查找
    var searchMatrix = function(matrix, target) {
        const rows = matrix.length;
        if (!rows) return false;
        const cols = matrix[0].length;
        if (!cols) return false;
        function searchRow() {
            let left = 0,
                right = rows - 1,
                mid;
            while (left <= right) {
                mid = Math.floor((left + right) / 2);
                if (matrix[mid][cols - 1] < target) {
                    left = mid  + 1;
                    console.log('left', left);
                }
                else if (matrix[mid][0] > target) {
                    right = mid - 1;
                    console.log('right', right);
                }else {
                    console.log('return', mid);
                    return mid;
                }
            }
            return -1;
        }
        function searchCol(row) {
            let left = 0,
                right = cols - 1,
                mid;
            while (left <= right) {
                mid = Math.floor((left + right) / 2);
                if (matrix[row][mid] === target) {
                    return true
                }
                else if (matrix[row][mid] > target) {
                    right = mid - 1;
                }
                else if (matrix[row][mid] < target) {
                    left = mid + 1;
                }
            }
            return false;
        }
        const targetRow = searchRow();
        if (targetRow === -1) return false;
       return searchCol(targetRow)
    };
    // 看答案之后的 二维变一维
    var searchMatrix2 = function(matrix, target) {
        const rows = matrix.length;
        if (!rows) return false;
        const cols = matrix[0].length;
        if (!cols) return false;
        let left = 0,
            right = rows * cols - 1,
            mid,
            temp;
        while (left <= right) {
            mid = Math.floor((left + right) / 2);
            temp = matrix[Math.floor(mid / cols)][mid % cols];
            if(temp === target) {
                return true;
            } else if (temp < target) {
                left = mid + 1;
            } else if (temp > target) {
                right = mid - 1;
            }
        }
        return false;
    };
        console.log(searchMatrix2(matrix, 3));
</script>
</body>
</html>
