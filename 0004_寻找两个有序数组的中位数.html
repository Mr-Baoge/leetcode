<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /**
     * @param {number[]} nums1
     * @param {number[]} nums2
     * @return {number}
     */
    const nums1 = [0,0];
    const nums2 = [0,0];
    // var findMedianSortedArrays = function(nums1, nums2) {
    //     const len1 = nums1.length;
    //     const len2 = nums2.length;
    //     const flag = (len1 + len2) % 2;
    //     const half = Math.floor((len1 + len2) / 2);
    //     let result = [];
    //     let p = 0,q = 0;
    //     while(nums1[p] !== undefined && nums2[q] !== undefined){
    //         if (nums1[p] < nums2[q]) {
    //             result.push(nums1[p]);
    //             p++;
    //         }
    //         else {
    //             result.push(nums2[q]);
    //             q++;
    //         }
    //         if(result.length === half + 1){
    //             return flag ? result[half] : (result[half - 1] + result[half]) / 2
    //         }
    //     }
    //     while(nums1[p] !== undefined){
    //         result.push(nums1[p++]);
    //         if(result.length === half + 1){
    //             return flag ? result[half] : (result[half - 1] + result[half]) / 2
    //         }
    //     }
    //     while(nums2[q] !== undefined){
    //         result.push(nums2[q++]);
    //         if(result.length === half + 1){
    //             return flag ? result[half] : (result[half - 1] + result[half]) / 2
    //         }
    //     }
    // };
    // console.log(findMedianSortedArrays(nums1,nums2));

// 二刷
// 划分数组法 时间最优 细节最多
    var findMedianSortedArrays = function(nums1, nums2) {
      if (nums1.length > nums2.length) {
        [nums1, nums2] = [nums2, nums1];
      }
      const m = nums1.length;
      const n = nums2.length;
      console.log(m, n)
      const totalLeft = Math.floor((m + n + 1) / 2); // 偶数取中间 奇数向上取整 ，合并的简单写法;
      let left = 0;
      let right = m;
      // 退出条件  nums1[i - 1] <= nums2[j] && nums2[j - 1] <= nums2[i];
      while(left < right) {
        const i = Math.ceil(left + (right - left ) / 2);
        const j = totalLeft - i;
        if (nums1[i - 1] > nums2[j]) {
        // 调整搜索区间为 [left, i - 1];
          right = i - 1;
        } else {
        // 调整搜索区间为 [i, right];
          left = i;
        }
      }
      const i = left;
      const j = totalLeft - i;
      const nums1LeftMax = i === 0 ? Number.MIN_SAFE_INTEGER : nums1[i - 1];
      const nums1RightMin = i === m ? Number.MAX_SAFE_INTEGER : nums1[i];
      const nums2LeftMax = j === 0 ? Number.MIN_SAFE_INTEGER : nums2[j - 1];
      const nums2RightMin = j === n ? Number.MAX_SAFE_INTEGER : nums2[j];
      if ((m + n) & 1) { // 两个数组长度和为奇数
        return Math.max(nums1LeftMax, nums2LeftMax)
      } else { // 偶数
        return (Math.max(nums1LeftMax, nums2LeftMax) + Math.min(nums1RightMin, nums2RightMin)) / 2;
      }
    }

    console.log(findMedianSortedArrays([1, 3], [2]));
</script>
</body>
</html>
